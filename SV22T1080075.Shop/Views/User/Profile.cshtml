@model KhachHang
@{
    ViewData["Title"] = "Hồ sơ cá nhân";
    var listTinh = ViewBag.ListTinhThanh as List<TinhThanh>;
}

<section class="py-5 bg-light">
    <div class="container">
        <div class="row">
            <div class="col-lg-3 mb-4">
                <partial name="_UserSidebar" />
            </div>

            <div class="col-lg-9">
                <div class="card border-0 shadow-sm rounded-4 p-4">
                    <h4 class="mb-4">Thông tin cá nhân</h4>

                    @if (TempData["Success"] != null)
                    {
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            <i class="bi bi-check-circle me-2"></i> @TempData["Success"]
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    }

                    <form asp-action="Profile" method="post" enctype="multipart/form-data">
                        <div class="row mb-4">
                            <div class="col-md-3 text-center">
                                <div class="position-relative d-inline-block">
                                    <img src="@(string.IsNullOrEmpty(Model.HinhAnh) ? "/images/no-image.png" : Model.HinhAnh)"
                                         class="img-thumbnail rounded-circle mb-2 object-fit-cover"
                                         style="width:120px; height:120px;" />
                                </div>
                                <input type="file" name="uploadPhoto" class="form-control form-control-sm mt-2" accept="image/*" />
                            </div>

                            <div class="col-md-9">
                                <div class="mb-3">
                                    <label class="form-label fw-bold text-muted small">Email (Tên đăng nhập)</label>
                                    <input value="@Model.Email" class="form-control bg-light" readonly />
                                </div>
                                <div class="mb-3">
                                    <label class="form-label fw-bold">Họ và tên <span class="text-danger">*</span></label>
                                    <input asp-for="HoTen" class="form-control" required />
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">Số điện thoại</label>
                                <input asp-for="DienThoai" class="form-control" placeholder="Nhập số điện thoại..." />
                            </div>

                            <div class="col-md-6 mb-3">
                                <label class="form-label fw-bold">Tỉnh / Thành phố</label>
                                <select asp-for="MaTinh" class="form-select">
                                    <option value="">-- Chọn Tỉnh / Thành --</option>
                                    @if (listTinh != null)
                                    {
                                        foreach (var tinh in listTinh)
                                        {
                                            <option value="@tinh.MaTinh">@tinh.TenTinh</option>
                                        }
                                    }
                                </select>
                            </div>
                        </div>

                        <div class="mb-4">
                            <label class="form-label fw-bold">Địa chỉ chi tiết</label>
                            <input asp-for="DiaChi" class="form-control" placeholder="Số nhà, tên đường, phường/xã..." />
                        </div>

                        <div class="text-end border-top pt-3">
                            <button type="submit" class="btn btn-primary px-4 py-2 fw-bold">
                                <i class="bi bi-save me-2"></i> Lưu thay đổi
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</section>